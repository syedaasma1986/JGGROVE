function BtnClick(){}function SendMessageToFrame(e){try{if(isNull(e)||e.length<1){PutToDebugLog(2,logtag+"ERROR, SendMessageToFrame invalid message: "+e);return}isNull(webphoneframe)&&(webphoneframe=document.getElementById("webphoneframe").contentWindow);if(isNull(webphoneframe)){PutToDebugLog(2,logtag+"ERROR, SendMessageToFrame webphoneframe is NULL");return}InitializeHandler(),webphoneframe.postMessage(e,allowed_domain_i)}catch(t){PutToDebugLogException(2,logtag+"SendMessageToFrame",t)}}function InitializeHandler(){try{if(flag_inithandlercalled===!0)return;flag_inithandlercalled=!0,PutToDebugLog(2,logtag+"EVENT, InitializeHandler, eventlistener attached to window"),webphoneframe=document.getElementById("webphoneframe").contentWindow,initcounter=setInterval(function(){initcallednr++,SendMessageToFrame("initialize_connection"),initcallednr>1200&&(initcallednr=0,isNull(initcounter)||clearInterval(initcounter),initcounter=null)},100),window.addEventListener("message",function(event){try{eval(event.data)}catch(err){PutToDebugLogException(2,logtag+"window.onmessage",err)}},!1)}catch(err){PutToDebugLogException(2,logtag+"InitializeHandler",err)}}function isNull(e){try{return typeof e=="undefined"||e===null?!0:!1}catch(t){PutToDebugLogException(2,logtag+"isNull",t)}return!0}function Trim(e){try{return isNull(e)||e.lenght<1?"":(e=e.toString(),e.replace(/^\s+|\s+$/g,""))}catch(t){PutToDebugLogException(2,logtag+"Trim",t)}return e}function PutToDebugLogException(e,t,n){PutToDebugLog(e,"ERROR,"+t+" "+n)}function PutToDebugLog(e,t){if(t.indexOf("ERROR")>-1)try{console.error(t)}catch(n){}else try{console.log(t)}catch(r){}}var allowed_domain_i="*",webphoneframe=null,logtag="iframe_webphone: ",webphone_api={},onLoaded_IFRAME=null;webphone_api.onLoaded=function(e){onLoaded_IFRAME=e,SendMessageToFrame("webphone_api.onLoaded")};var onStart_IFRAME=null;webphone_api.onStart=function(e){onStart_IFRAME=e,SendMessageToFrame("webphone_api.onStart")};var onRegistered_IFRAME=null;webphone_api.onRegistered=function(e){onRegistered_IFRAME=e,SendMessageToFrame("webphone_api.onRegistered")};var onUnRegistered_IFRAME=null;webphone_api.onUnRegistered=function(e){onUnRegistered_IFRAME=e,SendMessageToFrame("webphone_api.onUnRegistered")};var onCallStateChange_IFRAME=null;webphone_api.onCallStateChange=function(e){onCallStateChange_IFRAME=e,SendMessageToFrame("webphone_api.onCallStateChange")};var onChat_IFRAME=null;webphone_api.onChat=function(e){onChat_IFRAME=e,SendMessageToFrame("webphone_api.onChat")};var onCdr_IFRAME=null;webphone_api.onCdr=function(e){onCdr_IFRAME=e,SendMessageToFrame("webphone_api.onCdr")},webphone_api.start=function(){SendMessageToFrame("webphone_api.start(webphone_api.parameters)")},webphone_api.stop=function(){SendMessageToFrame("webphone_api.stop()")},webphone_api.register=function(){SendMessageToFrame("webphone_api.register(webphone_api.parameters)")},webphone_api.call=function(e){SendMessageToFrame("webphone_api.call("+e+")")},webphone_api.videocall=function(e){SendMessageToFrame("webphone_api.videocall("+e+")")},webphone_api.hangup=function(){SendMessageToFrame("webphone_api.hangup()")},webphone_api.accept=function(){SendMessageToFrame("webphone_api.accept()")},webphone_api.reject=function(){SendMessageToFrame("webphone_api.reject()")},webphone_api.ignore=function(){SendMessageToFrame("webphone_api.ignore()")},webphone_api.getavailablecallfunc=function(){InitializeHandler();if(!isNull(webphoneframe))return webphoneframe.webphone_api.getavailablecallfunc();PutToDebugLog(2,logtag+"ERROR, getavailablecallfunc webphoneframe is NULL")},webphone_api.getlastcalldetails=function(){InitializeHandler();if(!isNull(webphoneframe))return webphoneframe.webphone_api.getlastcalldetails();PutToDebugLog(2,logtag+"ERROR, getlastcalldetails webphoneframe is NULL")},webphone_api.forward=function(e){SendMessageToFrame("webphone_api.forward("+e+")")},webphone_api.conference=function(e,t){SendMessageToFrame("webphone_api.conference("+e+","+t+")")},webphone_api.transfer=function(e){SendMessageToFrame("webphone_api.transfer("+e+")")},webphone_api.dtmf=function(e){SendMessageToFrame("webphone_api.dtmf("+e+")")},webphone_api.mute=function(e,t){SendMessageToFrame("webphone_api.mute("+e+", "+t+")")},webphone_api.ismuted=function(){InitializeHandler();if(!isNull(webphoneframe))return webphoneframe.webphone_api.ismuted();PutToDebugLog(2,logtag+"ERROR, ismuted webphoneframe is NULL")},webphone_api.hold=function(e){SendMessageToFrame("webphone_api.hold("+e+")")},webphone_api.isonhold=function(){InitializeHandler();if(!isNull(webphoneframe))return webphoneframe.webphone_api.isonhold();PutToDebugLog(2,logtag+"ERROR, isonhold webphoneframe is NULL")},webphone_api.sendchat=function(e,t){SendMessageToFrame("webphone_api.sendchat("+e+","+t+")")},webphone_api.sendsms=function(e,t,n){SendMessageToFrame("webphone_api.sendsms("+e+","+t+","+n+")")},webphone_api.voicerecord=function(e,t){SendMessageToFrame("webphone_api.voicerecord("+e+","+t+")")},webphone_api.audiodevice=function(){SendMessageToFrame("webphone_api.audiodevice()")};var getaudiodevicelist_IFRAME=null;webphone_api.getaudiodevicelist=function(e,t){getaudiodevicelist_IFRAME=t,SendMessageToFrame("webphone_api.getaudiodevicelist#"+e)};var getaudiodevice_IFRAME=null;webphone_api.getaudiodevice=function(e,t){getaudiodevice_IFRAME=t,SendMessageToFrame("webphone_api.getaudiodevice#"+e)},webphone_api.setaudiodevice=function(e,t,n){SendMessageToFrame("webphone_api.setaudiodevice("+e+", "+t+", "+n+")")},webphone_api.setvolume=function(e,t){SendMessageToFrame("webphone_api.setvolume("+e+", "+t+")")};var getvolume_IFRAME=null;webphone_api.getvolume=function(e,t){getvolume_IFRAME=t,SendMessageToFrame("webphone_api.getvolume#"+e)},webphone_api.setparameter=function(e,t){SendMessageToFrame("webphone_api.setparameter("+e+", "+t+")")},webphone_api.getparameter=function(e){InitializeHandler();if(!isNull(webphoneframe))return webphoneframe.webphone_api.getparameter(e);PutToDebugLog(2,logtag+"ERROR, getparameter webphoneframe is NULL")},webphone_api.setline=function(e){SendMessageToFrame("webphone_api.setline("+e+")")},webphone_api.getline=function(){InitializeHandler();if(!isNull(webphoneframe))return webphoneframe.webphone_api.getline();PutToDebugLog(2,logtag+"ERROR, getline webphoneframe is NULL")},webphone_api.isregistered=function(){InitializeHandler();if(!isNull(webphoneframe))return webphoneframe.webphone_api.isregistered();PutToDebugLog(2,logtag+"ERROR, isregistered webphoneframe is NULL")},webphone_api.isincall=function(){InitializeHandler();if(!isNull(webphoneframe))return webphoneframe.webphone_api.isincall();PutToDebugLog(2,logtag+"ERROR, isincall webphoneframe is NULL")},webphone_api.unregister=function(){SendMessageToFrame("webphone_api.unregister()")},webphone_api.checkpresence=function(e){SendMessageToFrame("webphone_api.checkpresence("+e+")")},webphone_api.setpresencestatus=function(e){SendMessageToFrame("webphone_api.setpresencestatus("+e+")")},webphone_api.isencrypted=function(){InitializeHandler();if(!isNull(webphoneframe))return webphoneframe.webphone_api.isencrypted();PutToDebugLog(2,logtag+"ERROR, isencrypted webphoneframe is NULL")},webphone_api.setsipheader=function(e){SendMessageToFrame("webphone_api.setsipheader("+e+")")};var getsipheader_IFRAME=null;webphone_api.getsipheader=function(e,t){getsipheader_IFRAME=t,SendMessageToFrame("webphone_api.getsipheader#"+e)};var getsipmessage_IFRAME=null;webphone_api.getsipmessage=function(e,t,n){getsipmessage_IFRAME=n,SendMessageToFrame("webphone_api.getsipmessage#"+e+","+t+","+n)};var ondisplay_IFRAME=null;webphone_api.ondisplay=function(e){ondisplay_IFRAME=e,SendMessageToFrame("webphone_api.ondisplay")};var getworkdir_IFRAME=null;webphone_api.getworkdir=function(e){getworkdir_IFRAME=e,SendMessageToFrame("webphone_api.getworkdir")},webphone_api.delsettings=function(e){SendMessageToFrame("webphone_api.delsettings("+e+")")},webphone_api.getenginename=function(){InitializeHandler();if(!isNull(webphoneframe))return webphoneframe.webphone_api.getenginename();PutToDebugLog(2,logtag+"ERROR, getenginename webphoneframe is NULL")};var getlastinvite_IFRAME=null;webphone_api.getlastinvite=function(e){getlastinvite_IFRAME=e,SendMessageToFrame("webphone_api.getlastinvite")};var onLog_IFRAME=null;webphone_api.onLog=function(e){onLog_IFRAME=e,SendMessageToFrame("webphone_api.onLog")},webphone_api.getlogs=function(){InitializeHandler();if(!isNull(webphoneframe))return webphoneframe.webphone_api.getlogs();PutToDebugLog(2,logtag+"ERROR, getlogs webphoneframe is NULL")};var getEvents_IFRAME=null;webphone_api.getEvents=function(e){getEvents_IFRAME=e,SendMessageToFrame("webphone_api.getEvents")},webphone_api.getStatus=function(){InitializeHandler();if(!isNull(webphoneframe))return webphoneframe.webphone_api.getStatus();PutToDebugLog(2,logtag+"ERROR, getStatus webphoneframe is NULL")};var getregfailreason_IFRAME=null;webphone_api.getregfailreason=function(e,t){getregfailreason_IFRAME=e,SendMessageToFrame("webphone_api.getregfailreason#"+t)};var initcounter=null,initcallednr=0;window.onload=function(){InitializeHandler()};var flag_inithandlercalled=!1;